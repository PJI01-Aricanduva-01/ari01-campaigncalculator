{% extends "base.html" %}

{% block content %}
<h3><a href="/">In√≠cio</a> > {{ campaignset.name }} </h3>
</br>
<div class="container">
    <div class="flex">
        <h2>Campanhas</h2>
        <button type="button" class="btn btn-primary" onclick="newcampaign()">Adicionar Campanha</button>
    </div>            
    <div class="card" style="width: 18rem;" >
        <ul>
            {% for x in campaigns %}
                <li class="card" onClick="getcampaign()">
                    <h5 class="card-title" class="card">{{ x.name }}</h5>
                    <p class="card-text">{{ x.campaign_objective_id }}</p>
                    <p>Criado em: {{ x.date_creation }}</p>
                    <param name="id" value={{ x.campaign_id }}>                 
                </li>
            {% endfor %}
        </ul>
</div>

<script>
    function getcampaign(){
      //campid = event.target.parentElement.querySelector('param').getAttribute('value');
      //window.location.href = window.location + "campaign/" + campid;
      window.location.href = window.location.origin + "/campaign/" + event.target.parentElement.querySelector('param').getAttribute('value');
      //alert(window.location + "campaign/" + campid)
    }

    function newcampaign(){
        window.location.href = window.location.origin + "/campaigncreate/" + window.location.pathname.split('/').pop()
    }
</script>

{% endblock %}