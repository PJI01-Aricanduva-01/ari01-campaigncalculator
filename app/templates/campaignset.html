{% extends "base.html" %}

{% block content %}
<h3><a href="/">In√≠cio</a> > {{ campaignset.name }} </h3>
</br>
<div class="container">
    <div class="flex">
        <h2>Campanhas</h2>
        <button type="button" class="btn btn-primary" onclick="newcampaign()">Adicionar Campanha</button>
    </div>
        {% for x in campaigns %}
            <div class="card" style="width: 18rem;" onClick="getcampaign()">
                <img src="..." class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title">{{ x.name }}</h5>
                    <p class="card-text">{{ x.campaign_objective_id }}</p>
                    <param name="id" value={{ x.campaign_id }}>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Criado em: {{ x.date_creation }}</li>
                </ul>
                <!-- <div class="card-body">
                    <a href="#" class="card-link">Card link</a>
                    <a href="#" class="card-link">Another link</a>
                </div> -->
            </div>
        {% endfor %}
</div>

<script>
    function getcampaign(){
      //campid = event.target.parentElement.querySelector('param').getAttribute('value');
      //window.location.href = window.location + "campaign/" + campid;
      window.location.href = window.location.origin + "/campaign/" + event.target.parentElement.querySelector('param').getAttribute('value');
      //alert(window.location + "campaign/" + campid)
    }

    function newcampaign(){
        window.location.href = window.location.origin + "/campaigncreate/" + window.location.pathname.split('/').pop()
    }
</script>

{% endblock %}